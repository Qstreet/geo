<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
      integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
      crossorigin=""
    />

    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script
      src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
      integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
      crossorigin=""
    ></script>
  </head>

  <body>
    <!-- div should be after js call and above script code below -->
    <div id="map"></div>

    <!-- css -->
    <style>
      /* define height of map container */
      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
      }
    </style>

    <!-- js code  -->
    <script>
      //   const map = L.map("map").setView([8.9806, 38.7578], 13)
      //   change

      const cities = L.layerGroup()

      const mAddisAbaba = L.marker([9.0272, 38.7369])
        .bindPopup("Addis Ababa")
        .addTo(cities)
      const mNazret = L.marker([8.55, 39.27]).bindPopup("Nazret").addTo(cities)
      const mGonder = L.marker([12.6, 37.4667])
        .bindPopup("Gonder")
        .addTo(cities)
      const mMekele = L.marker([13.4969, 39.4769])
        .bindPopup("Mekele")
        .addTo(cities)
      const mAwasa = L.marker([7.05, 38.4667]).bindPopup("Awasa").addTo(cities)
      const mDireDawa = L.marker([9.5833, 41.8667])
        .bindPopup("Dire Dawa")
        .addTo(cities)
      const mBahirDar = L.marker([11.585, 37.39])
        .bindPopup("Bahir Dar")
        .addTo(cities)
      const mHarar = L.marker([9.32, 42.15]).bindPopup("Harar").addTo(cities)
      const mJijiga = L.marker([9.35, 42.8]).bindPopup("Jijiga").addTo(cities)
      const mAsosa = L.marker([10.067, 34.5333])
        .bindPopup("Asosa")
        .addTo(cities)
      const mGambela = L.marker([8.25, 34.5833])
        .bindPopup("Gambela")
        .addTo(cities)
      const mSemera = L.marker([11.7956, 41.0086])
        .bindPopup("Semera")
        .addTo(cities)

      // American Spaces
      const amSpaces = L.layerGroup()

      const mBahirDarAC = L.marker([11.59363418, 37.37839321])
        .bindPopup("Bahir Dar AC")
        .addTo(amSpaces)
      const mDireDawaAC = L.marker([9.583438, 41.856938])
        .bindPopup("Dire Dawa AC")
        .addTo(amSpaces)
      const mJimmaAC = L.marker([7.676687, 36.835938])
        .bindPopup("Jimma AC")
        .addTo(amSpaces)
      const mMekeleAC = L.marker([13.48392, 39.45552])
        .bindPopup("Mekele AC")
        .addTo(amSpaces)
      //   const mCJCRAC = L.marker([9.03014, 38.7628805])
      //     .bindPopup("CJCRAC")
      //     .addTo(amSpaces)
      const mSatchmo = L.marker([9.05821, 38.7635])
        .bindPopup("Satchmo")
        .addTo(amSpaces)

      // 225km security radius
      const radCircle = L.layerGroup()
      const rad225 = L.circle([8.9806, 38.7578], { radius: 225000 }).addTo(
        radCircle
      )

      const mbAttr =
        'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>'
      const mbUrl =
        "https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw"

      const streets = L.tileLayer(mbUrl, {
        id: "mapbox/streets-v11",
        tileSize: 512,
        zoomOffset: -1,
        attribution: mbAttr,
      })

      const osm = L.tileLayer(
        "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          maxZoom: 19,
          attribution:
            '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
        }
      )

      const map = L.map("map", {
        center: [8.9806, 38.7578],
        zoom: 7,
        layers: [osm, cities],
      })

      const baseLayers = {
        OpenStreetMap: osm,
        Streets: streets,
      }

      const overlays = {
        "Major Cities": cities,
        "American Spaces": amSpaces,
        "225km Radius": radCircle,
      }

      const layerControl = L.control.layers(baseLayers, overlays).addTo(map)
      const crownHill = L.marker([39.75, -105.09]).bindPopup(
        "This is Crown Hill Park."
      )
      const rubyHill = L.marker([39.68, -105.0]).bindPopup(
        "This is Ruby Hill Park."
      )

      const parks = L.layerGroup([crownHill, rubyHill])

      const satellite = L.tileLayer(mbUrl, {
        id: "mapbox/satellite-v9",
        tileSize: 512,
        zoomOffset: -1,
        attribution: mbAttr,
      })

      layerControl.addBaseLayer(satellite, "Satellite")
      layerControl.addOverlay(parks, "Parks")

      // LAT LONG POPUP
      const popup = L.popup()

      const onMapClick = (e) => {
        popup
          .setLatLng(e.latlng)
          .setContent(
            e.latlng.lat.toString().slice(0, 6) +
              ", " +
              e.latlng.lng.toString().slice(0, 6)
          )
          .openOn(map)
      }

      map.on("click", onMapClick)
    </script>
  </body>
</html>
